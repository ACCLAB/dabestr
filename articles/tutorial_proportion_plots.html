<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tutorial: Proportion Plots • dabestr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tutorial: Proportion Plots">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dabestr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2025.3.14</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/plot_aesthetics.html">Controlling Plot Aesthetics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/tutorial_basics.html">Tutorial: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_repeated_measures.html">Tutorial: Repeated Measures</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_proportion_plots.html">Tutorial: Proportion Plots</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_minimeta.html">Tutorial: Mini-Meta Delta</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_deltadelta.html">Tutorial: Delta-Delta</a></li>
    <li><a class="dropdown-item" href="../articles/sample_datasets.html">Sample Datasets</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ACCLAB/dabestr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Tutorial: Proportion Plots</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ACCLAB/dabestr/blob/master/vignettes/tutorial_proportion_plots.Rmd" class="external-link"><code>vignettes/tutorial_proportion_plots.Rmd</code></a></small>
      <div class="d-none name"><code>tutorial_proportion_plots.Rmd</code></div>
    </div>

    
    
<p>This vignette documents how the <code>dabestr</code> package is able
to generate proportion plots for binary data.</p>
<hr>
<p><strong>NOTE</strong></p>
<blockquote>
<p>It’s important to note that the code we provide only supports
numerical proportion data, where the values are limited to 0 (failure)
and 1 (success). This means that the code is not suitable for analyzing
proportion data that contains non-numeric values, such as strings like
‘yes’ and ‘no’.</p>
</blockquote>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ACCLAB/dabestr" class="external-link">dabestr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="create-dataset-for-demo">Create dataset for demo<a class="anchor" aria-label="anchor" href="#create-dataset-for-demo"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span> <span class="co"># Fix the seed so the results are reproducible.</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">40</span> <span class="co"># The number of samples taken from each population</span></span>
<span></span>
<span><span class="co"># Create samples</span></span>
<span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">c1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="va">c2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="va">c3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.35</span><span class="op">)</span></span>
<span><span class="va">t2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="va">t3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="va">t4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="va">t5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">t6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">size</span>, prob <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span>
<span><span class="va">t7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">N</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add a `gender` column for coloring the data.</span></span>
<span><span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="va">N</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="va">N</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add an `id` column for paired data plotting.</span></span>
<span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="va">N</span></span>
<span></span>
<span><span class="co"># Combine samples and gender into a DataFrame.</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  `Control 1` <span class="op">=</span> <span class="va">c1</span>, `Control 2` <span class="op">=</span> <span class="va">c2</span>, `Control 3` <span class="op">=</span> <span class="va">c3</span>,</span>
<span>  `Test 1` <span class="op">=</span> <span class="va">t1</span>, `Test 2` <span class="op">=</span> <span class="va">t2</span>, `Test 3` <span class="op">=</span> <span class="va">t3</span>, `Test 4` <span class="op">=</span> <span class="va">t4</span>, `Test 5` <span class="op">=</span> <span class="va">t5</span>,</span>
<span>  `Test 6` <span class="op">=</span> <span class="va">t6</span>, `Test 7` <span class="op">=</span> <span class="va">t7</span>,</span>
<span>  Gender <span class="op">=</span> <span class="va">gender</span>, ID <span class="op">=</span> <span class="va">id</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">Group</span>, value <span class="op">=</span> <span class="va">Success</span>, <span class="op">-</span><span class="va">ID</span>, <span class="op">-</span><span class="va">Gender</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Gender</th>
<th align="right">ID</th>
<th align="left">Group</th>
<th align="right">Success</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Male</td>
<td align="right">1</td>
<td align="left">Control 1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Male</td>
<td align="right">2</td>
<td align="left">Control 1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Male</td>
<td align="right">3</td>
<td align="left">Control 1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Male</td>
<td align="right">4</td>
<td align="left">Control 1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Male</td>
<td align="right">5</td>
<td align="left">Control 1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Male</td>
<td align="right">6</td>
<td align="left">Control 1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="loading-data">Loading Data<a class="anchor" aria-label="anchor" href="#loading-data"></a>
</h2>
<p>When loading data, you need to set the parameter
<code>proportional = TRUE</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">two_groups_unpaired</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load.html">load</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  x <span class="op">=</span> <span class="va">Group</span>, y <span class="op">=</span> <span class="va">Success</span>,</span>
<span>  idx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Control 1"</span>, <span class="st">"Test 1"</span><span class="op">)</span>,</span>
<span>  proportional <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">two_groups_unpaired</span><span class="op">)</span></span>
<span><span class="co">#&gt; DABESTR v2025.3.14</span></span>
<span><span class="co">#&gt; ==================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Good morning!</span></span>
<span><span class="co">#&gt; The current time is 09:52 AM on Thursday May 08, 2025.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ffect size(s) with 95% confidence intervals will be computed for:</span></span>
<span><span class="co">#&gt; 1. Test 1 minus Control 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 5000 resamples will be used to generate the effect size bootstraps.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="effect-sizes">Effect sizes<a class="anchor" aria-label="anchor" href="#effect-sizes"></a>
</h2>
<p>For proportion plot, dabest features two effect sizes:</p>
<ul>
<li>the mean difference (<code><a href="../reference/effect_size.html">mean_diff()</a></code>)</li>
<li>Cohen’s h (<code><a href="../reference/effect_size.html">cohens_h()</a></code>)</li>
</ul>
<p>The output of the <code><a href="../reference/load.html">load()</a></code> function, a <code>dabest</code>
object, is then passed into these <code><a href="../reference/effect_size.html">effect_size()</a></code> functions
as a parameter.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">two_groups_unpaired.mean_diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/effect_size.html">mean_diff</a></span><span class="op">(</span><span class="va">two_groups_unpaired</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">two_groups_unpaired.mean_diff</span><span class="op">)</span></span>
<span><span class="co">#&gt; DABESTR v2025.3.14</span></span>
<span><span class="co">#&gt; ==================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Good morning!</span></span>
<span><span class="co">#&gt; The current time is 09:52 AM on Thursday May 08, 2025.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The character(0) mean difference between Test 1 and Control 1 is 0.35 [95%CI 0.15, 0.55].</span></span>
<span><span class="co">#&gt; The p-value of the two-sided permutation t-test is 0.0008, calculated for legacy purposes only.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 5000 bootstrap samples were taken; the confidence interval is bias-corrected and accelerated.</span></span>
<span><span class="co">#&gt; Any p-value reported is the probability of observing the effect size (or greater),</span></span>
<span><span class="co">#&gt; assuming the null hypothesis of zero difference is true.</span></span>
<span><span class="co">#&gt; For each p-value, 5000 reshuffles of the control and test labels were performed.</span></span></code></pre></div>
<p>Let’s compute the <em>Cohen’s h</em> for our comparison.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">two_groups_unpaired.cohens_h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/effect_size.html">cohens_h</a></span><span class="op">(</span><span class="va">two_groups_unpaired</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">two_groups_unpaired.cohens_h</span><span class="op">)</span></span>
<span><span class="co">#&gt; DABESTR v2025.3.14</span></span>
<span><span class="co">#&gt; ==================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Good morning!</span></span>
<span><span class="co">#&gt; The current time is 09:52 AM on Thursday May 08, 2025.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The character(0) NA between Test 1 and Control 1 is 0.758 [95%CI 0.311, 1.217].</span></span>
<span><span class="co">#&gt; The p-value of the two-sided permutation t-test is 0.0008, calculated for legacy purposes only.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 5000 bootstrap samples were taken; the confidence interval is bias-corrected and accelerated.</span></span>
<span><span class="co">#&gt; Any p-value reported is the probability of observing the effect size (or greater),</span></span>
<span><span class="co">#&gt; assuming the null hypothesis of zero difference is true.</span></span>
<span><span class="co">#&gt; For each p-value, 5000 reshuffles of the control and test labels were performed.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-unpaired-proportional-plots">Generating Unpaired Proportional Plots<a class="anchor" aria-label="anchor" href="#generating-unpaired-proportional-plots"></a>
</h2>
<p>To produce a <strong>Gardner-Altman estimation plot</strong>, simply
use the <code><a href="../reference/dabest_plot.html">dabest_plot()</a></code> function.</p>
<p>The <code><a href="../reference/dabest_plot.html">dabest_plot()</a></code> function only requires one compulsory
parameter to run, the <code>dabest_effectsize_obj</code> obtained from
the <code><a href="../reference/effect_size.html">effect_size()</a></code> function. Thus, you can quickly and
easily create plots for different effect sizes.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">two_groups_unpaired.mean_diff</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">two_groups_unpaired.cohens_h</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-7-2.png" width="700"></p>
<p>The white portion of the bar represents the proportion of
observations in the dataset that do not belong to the category, which is
equivalent to the proportion of 0 in the data. The colored portion, on
the other hand, represents the proportion of observations that belong to
the category, which is equivalent to the proportion of 1 in the data
(success). The error bars in the plot display the mean and ± standard
deviation of each group as gapped lines. The gap represents the mean,
while the vertical ends represent the standard deviation. By default,
the bootstrap effect sizes are plotted on the right axis.</p>
<p>Alternatively, you can produce a <strong>Cumming estimation
plot</strong> instead of a Gardner-Altman plot by setting
<code>float_contrast = FALSE</code> in the <code><a href="../reference/dabest_plot.html">dabest_plot()</a></code>
function. This will plot the bootstrap effect sizes below the raw
data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">two_groups_unpaired.mean_diff</span>, float_contrast <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>You can also modify the width of bars by setting the parameter
<code>raw_bar_width</code> in the <code><a href="../reference/dabest_plot.html">dabest_plot()</a></code>
function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">two_groups_unpaired.mean_diff</span>, raw_bar_width <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>The parameters <code>swarm_label</code> and
<code>contrast_label</code> can be used to set labels for the y-axis of
the bar plot and the contrast plot.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">two_groups_unpaired.mean_diff</span>,</span>
<span>  swarm_label <span class="op">=</span> <span class="st">"success"</span>, contrast_label <span class="op">=</span> <span class="st">"difference"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="generating-sankey-plots-for-paired-proportions">Generating Sankey plots for paired proportions<a class="anchor" aria-label="anchor" href="#generating-sankey-plots-for-paired-proportions"></a>
</h2>
<p>For the paired version of the proportion plot, we adopt the style of
a Sankey Diagram. The width of each bar in each xtick represents the
proportion of the corresponding label in the group, and the strip
denotes the paired relationship for each observation.</p>
<p>Similar to the unpaired version, the <code><a href="../reference/dabest_plot.html">dabest_plot()</a></code>
function is used to produce a <strong>Gardner-Altman estimation
plot</strong>, the only difference is that the <code>paired</code>
parameter is set to either “baseline” or “sequential” when loading the
data.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">two_groups_baseline.mean_diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load.html">load</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  x <span class="op">=</span> <span class="va">Group</span>, y <span class="op">=</span> <span class="va">Success</span>,</span>
<span>  idx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Control 1"</span>, <span class="st">"Test 1"</span><span class="op">)</span>,</span>
<span>  proportional <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paired <span class="op">=</span> <span class="st">"baseline"</span>, id_col <span class="op">=</span> <span class="va">ID</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/effect_size.html">mean_diff</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">two_groups_baseline.mean_diff</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>The paired proportional plot also supports the
<code>float_contrast</code> parameter, which can be set to
<code>FALSE</code> to produce a <strong>Cumming estimation
plot</strong>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">two_groups_baseline.mean_diff</span>, float_contrast <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>The upper part (grey section) of the bar represents the proportion of
observations in the dataset that do not belong to the category,
equivalent to the proportion of 0 in the data. The lower part,
conversely, represents the proportion of observations that belong to the
category, synonymous with <strong>success</strong>, equivalent to the
proportion of 1 in the data.</p>
<p>Repeated measures are also supported in paired proportional plot. By
adjusting the <code>paired</code> parameter, two types of plot can be
generated.</p>
<p>By default, the raw data plot (upper part) in both “baseline” and
“sequential” repeated measures remains the same; the only difference is
the lower part. For detailed information about repeated measures, please
refer to <code><a href="../articles/tutorial_repeated_measures.html">vignette("tutorial_repeated_measures")</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi_group_baseline.mean_diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load.html">load</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  x <span class="op">=</span> <span class="va">Group</span>, y <span class="op">=</span> <span class="va">Success</span>,</span>
<span>  idx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Control 1"</span>, <span class="st">"Test 1"</span>,</span>
<span>      <span class="st">"Test 2"</span>, <span class="st">"Test 3"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Test 4"</span>, <span class="st">"Test 5"</span>,</span>
<span>      <span class="st">"Test 6"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  proportional <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paired <span class="op">=</span> <span class="st">"baseline"</span>, id_col <span class="op">=</span> <span class="va">ID</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/effect_size.html">mean_diff</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">multi_group_baseline.mean_diff</span>,</span>
<span>  swarm_y_text <span class="op">=</span> <span class="fl">11</span>, contrast_y_text <span class="op">=</span> <span class="fl">11</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi_group_sequential.mean_diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load.html">load</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  x <span class="op">=</span> <span class="va">Group</span>, y <span class="op">=</span> <span class="va">Success</span>,</span>
<span>  idx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Control 1"</span>, <span class="st">"Test 1"</span>,</span>
<span>      <span class="st">"Test 2"</span>, <span class="st">"Test 3"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Test 4"</span>, <span class="st">"Test 5"</span>,</span>
<span>      <span class="st">"Test 6"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  proportional <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paired <span class="op">=</span> <span class="st">"sequential"</span>, id_col <span class="op">=</span> <span class="va">ID</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/effect_size.html">mean_diff</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">multi_group_sequential.mean_diff</span>,</span>
<span>  swarm_y_text <span class="op">=</span> <span class="fl">11</span>, contrast_y_text <span class="op">=</span> <span class="fl">11</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<p>If you want to specify the order of the groups, you can use the
<code>idx</code> parameter in the <code><a href="../reference/load.html">load()</a></code> function.</p>
<p>For all the groups to be compared together, you can put all the
groups in the <code>idx</code> parameter in the <code><a href="../reference/load.html">load()</a></code>
function in a singular vector/non-nested list.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi_group_baseline_specify.mean_diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load.html">load</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  x <span class="op">=</span> <span class="va">Group</span>, y <span class="op">=</span> <span class="va">Success</span>,</span>
<span>  idx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Control 1"</span>, <span class="st">"Test 1"</span>,</span>
<span>    <span class="st">"Test 2"</span>, <span class="st">"Test 3"</span>,</span>
<span>    <span class="st">"Test 4"</span>, <span class="st">"Test 5"</span>,</span>
<span>    <span class="st">"Test 6"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  proportional <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paired <span class="op">=</span> <span class="st">"baseline"</span>, id_col <span class="op">=</span> <span class="va">ID</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/effect_size.html">mean_diff</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">multi_group_baseline_specify.mean_diff</span>,</span>
<span>  swarm_y_text <span class="op">=</span> <span class="fl">11</span>, contrast_y_text <span class="op">=</span> <span class="fl">11</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<div class="section level3">
<h3 id="adjustment-parameters">Adjustment parameters<a class="anchor" aria-label="anchor" href="#adjustment-parameters"></a>
</h3>
<p>By adjusting the <code>sankey</code> and <code>flow</code>
parameters, you can create different types of paired proportional
plots.</p>
<p>By default, the <code>sankey</code> and <code>flow</code> arguments
are set to <code>TRUE</code> to accommodate the needs of
repeated-measures analyses. When <code>sankey</code> is set to
<code>FALSE</code>, the <code>dabestr</code> package generates a bar
plot with a similar aesthetic to the paired proportional plot. When
<code>flow</code> is set to <code>FALSE</code>, each group of comparison
forms a sankey diagram which does not connect to other groups of
comparison.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">separate_control.mean_diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load.html">load</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  x <span class="op">=</span> <span class="va">Group</span>, y <span class="op">=</span> <span class="va">Success</span>,</span>
<span>  idx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Control 1"</span>, <span class="st">"Test 1"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Test 2"</span>, <span class="st">"Test 3"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Test 4"</span>, <span class="st">"Test 5"</span>, <span class="st">"Test 6"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  proportional <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paired <span class="op">=</span> <span class="st">"sequential"</span>, id_col <span class="op">=</span> <span class="va">ID</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/effect_size.html">mean_diff</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">separate_control.mean_diff</span>, swarm_y_text <span class="op">=</span> <span class="fl">11</span>, contrast_y_text <span class="op">=</span> <span class="fl">11</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">separate_control.mean_diff</span>,</span>
<span>  swarm_y_text <span class="op">=</span> <span class="fl">11</span>, contrast_y_text <span class="op">=</span> <span class="fl">11</span>,</span>
<span>  sankey <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-18-2.png" width="700"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dabest_plot.html">dabest_plot</a></span><span class="op">(</span><span class="va">separate_control.mean_diff</span>,</span>
<span>  swarm_y_text <span class="op">=</span> <span class="fl">11</span>, contrast_y_text <span class="op">=</span> <span class="fl">11</span>,</span>
<span>  flow <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_proportion_plots_files/figure-html/unnamed-chunk-18-3.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joses W. Ho, <a href="https://github.com/sunroofgod" class="external-link">Kah Seng Lian</a>, Ana Rosa Castillo, Zhuoyu Wang, <a href="https://github.com/junyangliao" class="external-link">Jun Yang Liao</a>, Felicia Low, Tayfun Tumkaya, Jonathan Anns, Yishan Mai, Sangyu Xu, Hyungwon Choi, Adam Claridge-Chang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
